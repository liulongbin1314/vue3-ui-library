@use './common/mixins.scss';
@use './mask.scss';
@use './button.scss';
@use './icon.scss';
@use './initRoot.scss';
@use './loading.scss';

$placements: (left, right, top, bottom);

// 根元素
@include mixins.b(drawer) {
  position: fixed;
  // left: 50%;
  // top: 15vh;
  box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
  box-sizing: border-box;
  padding: 20px;
  // border-radius: 15px;
  transform: translate(0, 0);
  // width: 500px;
  background-color: #fff;
  transition: 0.3s;

  // 内层容器
  @include mixins.e(wrapper) {
    height: 100%;
    display: flex;
    flex-direction: column;

    // 头部
    @include mixins.e(header) {
      display: flex;
      justify-content: space-between;
      font-size: 18px;

      // 标题
      @include mixins.e(title) {
        display: flex;
        align-items: center;

        > span {
          display: flex;
          align-items: center;
          // margin-right: 10px;
          padding-right: 10px;
          white-space: nowrap;
        }
      }

      // 关闭图标
      @include mixins.e(icon-close) {
        opacity: 0.5;
        transition: 0.3s;

        &:hover {
          opacity: 1;
          cursor: pointer;
          transform: rotate(180deg);
        }
      }
    }

    // 主体
    @include mixins.e(body) {
      flex: 1;
      height: 0;
      overflow-y: auto;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        width: 0;
      }

      @include mixins.e(body-inner) {
        padding: 24px 0 24px;
        word-break: break-word;
      }
    }

    // 尾部
    @include mixins.e(footer) {
      display: flex;
      justify-content: flex-end;

      > button {
        margin-left: 15px;
      }
    }
  }
}

@each $place in $placements {
  @include mixins.m(placement, $place) {
    #{$place}: 0;

    @if $place == left or $place == right {
      top: 0;
      bottom: 0;
    }
    @if $place == top or $place == bottom {
      left: 0;
      right: 0;
    }

    @include mixins.s(round) {
      @if $place == bottom {
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
      }
      @if $place == top {
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    }
  }
}

.a-drawer-enter-from,
.a-drawer-leave-to {
  opacity: 0;

  .a-drawer {
    opacity: 0;

    &.a-drawer--placement_left {
      transform: translateX(-100%);
    }
    &.a-drawer--placement_right {
      transform: translateX(100%);
    }
    &.a-drawer--placement_top {
      transform: translateY(-100%);
    }
    &.a-drawer--placement_bottom {
      transform: translateY(100%);
    }
  }
}
